<th:block th:fragment="viewStyles">
  <link href="/plugins/datatables/datatables.bundle.css" rel="stylesheet" />
</th:block>

<div th:fragment="content">
  <div class="card card-flush">
    <div class="card-header py-4">
      <div class="d-flex justify-content-between align-items-center">
        <div class="p-2">
          <div class="form-outline">
            <div data-mdb-input-init class="form-outline">
              <input
                type="text"
                class="form-control"
                id="datatable-search-input"
              />
              <label class="form-label" for="datatable-search-input"
                >Search</label
              >
            </div>
          </div>
        </div>
        <div class="p-2">
          <button type="button" class="btn btn-success" data-mdb-ripple-init>
            Add Product
          </button>
        </div>
      </div>
    </div>

    <div class="card-body pt-0">
      <div
        data-mdb-datatable-init
        data-mdb-hover="true"
        class="datatable-search"
        id="datatable-search"
      >
        <table>
          <thead>
            <tr>
              <th class="th-sm">Product</th>
              <th class="th-sm">SKU</th>
              <th class="th-sm">Quantity</th>
              <th class="th-sm">Price</th>
              <th class="th-sm">Rating</th>
              <th class="th-sm">Status</th>
              <th class="th-sm" data-mdb-sort="false">Action</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>School Backpack</td>
              <td>BP001</td>
              <td>150</td>
              <td>$25.00</td>
              <td>4.5</td>
              <td>
                <span class="badge rounded-pill badge-primary">In Stock</span>
              </td>
              <td>
                <button type="button" class="btn btn-info" data-mdb-ripple-init>
                  Edit
                </button>
              </td>
            </tr>
            <tr>
              <td>Office Bag</td>
              <td>BP002</td>
              <td>75</td>
              <td>$45.00</td>
              <td>4.7</td>
              <td>
                <span class="badge rounded-pill badge-primary">In Stock</span>
              </td>
              <td>
                <button type="button" class="btn btn-info" data-mdb-ripple-init>
                  Edit
                </button>
              </td>
            </tr>
            <tr>
              <td>Travel Backpack</td>
              <td>BP003</td>
              <td>30</td>
              <td>$60.00</td>
              <td>4.8</td>
              <td>
                <span class="badge rounded-pill badge-danger"
                  >Out of Stock</span
                >
              </td>
              <td>
                <button type="button" class="btn btn-info" data-mdb-ripple-init>
                  Edit
                </button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>

<th:block th:fragment="viewScripts">
  <script src="/plugins/datatables/datatables.bundle.js"></script>
  <script>
    document
      .getElementById("datatable-search-input")
      .addEventListener("input", (e) => {
        const instance = mdb.Datatable.getInstance(
          document.getElementById("datatable-search")
        );

        instance.search(e.target.value);
      });

    const advancedSearchInput = document.getElementById(
      "advanced-search-input"
    );

    const search = (value) => {
      const instance = mdb.Datatable.getInstance(
        document.getElementById("datatable-advanced-search")
      );

      let [phrase, columns] = value.split(" in:").map((str) => str.trim());

      if (columns) {
        columns = columns.split(",").map((str) => str.toLowerCase().trim());
      }

      instance.search(phrase, columns);
    };
  </script>
</th:block>
